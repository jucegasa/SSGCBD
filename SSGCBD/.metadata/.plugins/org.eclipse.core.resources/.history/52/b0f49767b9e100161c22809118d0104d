package reportes.view;

import java.util.ArrayList;

import tooldataform.formmodel.concreta.Container;
import tooldataform.formmodel.concreta.Containment;
import tooldataform.formmodel.concreta.DataForm_Diagram;
import tooldataform.formmodel.concreta.RelacionDataForm;

public class ViewModelGenerator {

	DataForm_Diagram dfDiagram;
	
	ArrayList<RelacionDataForm> relations;
	
	ArrayList<String> namesViewModel;
	
	@SuppressWarnings("unchecked")
	public ViewModelGenerator(DataForm_Diagram dfDiagram) {
		
		this.dfDiagram = dfDiagram;
		relations = (ArrayList<RelacionDataForm>) dfDiagram.getListarelacion();
		namesViewModel = new ArrayList<String>();
	}
	
	public void exploreRelations() {
		
		RelacionDataForm relation = null;
		String bRol;
		for (int i = 0; i < relations.size(); i++) {
			
			relation = relations.get(i);
			if(relation.getSource() instanceof Container && relation instanceof Containment) {
				break;
			}
		}
		
		while (relation != null) {
			
			bRol = getNameEntity(relation.getBRol());
			relation = null;
			for (int i = 0; i < relations.size(); i++) {
				
				if(relations.get(i).getARol().equals("ownedBy"+bRol) && relation instanceof Containment) {
					relation = relations.get(i);
				}
			}
		}
	}
	
	public String getNameEntity(String rol) {
		
		return rol.substring(4, rol.length());
	}
	
}
